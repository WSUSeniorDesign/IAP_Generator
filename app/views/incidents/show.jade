extends ../layouts/default.jade

mixin formGroup(labelText, value)
  .form-group
    label= labelText
    div: p.form-static-control= value

block main
  h2= title

block content
  .row
    .col-xs-12
      .form
        +formGroup("Incident Name", incident.name)
        +formGroup("Location", incident.location)
        +formGroup("Active", incident.active)
        .form-group
          h3 Forms
          p: a(href=`/incidents/${incident._id}/form/ics204/new`) + Create new ICS 204
            if incident.hasOwnProperty('forms') && incident.forms.hasOwnProperty('ics204') && incident.forms.ics204.length > 0
              table.table.table-striped
                thead
                  tr
                    th Form
                    th ID
                    th.text-right Options
                tbody
                  each form in incident.forms.ics204
                    tr
                      td= form.constructor.modelName //- the name of the form mongoose model, e.g. ICS204
                      td: a(href="/incidents/#{incident.id}/form/ics204/#{form.id}")= form.id
                      td.text-right
                        form(action="/incidents/#{incident.id}/form/ics204/#{form.id}", method="post", onsubmit="return confirm('Are you sure?')")
                          a.btn.btn-default.btn-xs(href="/incidents/#{incident.id}/form/ics204/#{form.id}/edit") Edit
                          = " "
                          input(type="hidden", name="_csrf", value=csrf_token)
                          input(type="hidden", name="_method", value="DELETE")
                          button.btn.btn-danger.btn-xs(type="submit") Delete
